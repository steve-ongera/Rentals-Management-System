{% extends 'base.html' %}
{% load static %}
{% block title %}Workers List - Ngeka Rentals{% endblock %}

{% block content %}
<link href="{% static 'assets/css/style2.css' %}" rel="stylesheet">
<br>
<br>
<br>
<br>

<main id="main" class="main">
    <section class="section">
        <div class="container">
            <!-- Display any messages -->
            {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} warning alert-dismissible fade show" role="alert">
                    <strong>{{ message }}</strong>
                </div>
            {% endfor %}
            {% endif %}

            <div class="col-auto float-right ml-auto">
                <a href="{% url 'add_worker'%}" class="btn add-btn" ><i class="fa fa-plus"></i> Add Worker</a>
            </div>
            <br>
            <br>
            <br>

            <div class="table-responsive">
                <table class="table table-striped custom-table mb-0 datatable">
                    <thead>
                        <tr>
                            <th>Photo</th>
                            <th>Full Name</th>
                            <th>Role</th>
                            <th>Phone</th>
                            <th>ID Number</th>
                            <th>Email</th>
                            <th>Address</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for worker in workers %}
                        <tr>
                            <td>
                                <a href="{% url 'worker_detail' worker.id %}" class="avatar">
                                    <img alt="" src="{{ worker.photo.url }}" style="width: 50px; height: 50px; object-fit: cover;">
                                </a>
                            </td>
                            <td>
                                <a href="{% url 'worker_detail' worker.id %}"><b>{{ worker.first_name }} {{ worker.last_name }}</b></a>
                            </td>
                            <td>
                                {{ worker.role }}
                            </td>
                            <td>
                                {{ worker.phone }}
                            </td>
                            <td>
                                {{ worker.id_number }}
                            </td>
                            <td>
                                {{ worker.email }}
                            </td>
                            <td>
                                {{ worker.address }}
                            </td>
                            <td>
                                <a href="{% url 'worker_detail' worker.id %}" class="btn btn-info btn-sm">View</a>
                                <a href="{% url 'update_worker' worker.id %}" class="btn btn-info btn-sm">Update</a>
                                <a href="{% url 'delete_worker' worker.pk %}" class="btn btn-danger btn-sm">Delete</a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="8" class="text-center">No workers found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</main>

<br>
<br>
<br>
<br>
<br>
<br>

{% endblock %}
